<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pipeline de An√°lisis de Datos Inmobiliarios - Diagrama Interactivo</title>
    
    <!-- External Dependencies -->
    <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <!-- Local Stylesheets -->
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Pipeline de An√°lisis de Datos Inmobiliarios</h1>
            <p>Diagrama Interactivo - Procesamiento Unificado Optimizado</p>
            <p><strong>Autor:</strong> Juan Camilo Ria√±o Molano | <strong>Fecha:</strong> 04/08/2025</p>
        </header>

        <!-- Metrics Panel -->
        <section class="metrics-panel">
            <div class="metric-card">
                <div class="metric-value">~52K</div>
                <div class="metric-label">Registros Procesados</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">99.7%</div>
                <div class="metric-label">Confiabilidad</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">47%</div>
                <div class="metric-label">Optimizaci√≥n</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">7</div>
                <div class="metric-label">Fases Principales</div>
            </div>
        </section>

        <!-- SECCI√ìN DE INDICADORES CLAVE Y RESULTADOS -->
        <section class="results-section">
            <h2 class="results-title">üìä Indicadores Clave y Resultados del An√°lisis</h2>
            
            <!-- Indicadores de Rendimiento -->
            <div class="indicators-grid">
                <div class="indicator-category">
                    <h3>üìà M√©tricas de Rendimiento del Sistema</h3>
                    <div class="indicator-list">
                        <div class="indicator-item">
                            <span class="indicator-label">Registros Procesados:</span>
                            <span class="indicator-value">52,353 registros inmobiliarios</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">Confiabilidad Alcanzada:</span>
                            <span class="indicator-value">99.7% (mejora del 5.52%)</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">Optimizaci√≥n Total:</span>
                            <span class="indicator-value">47% de mejora en eficiencia</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">Tiempo Total de Procesamiento:</span>
                            <span class="indicator-value">78-108 segundos</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">Throughput Promedio:</span>
                            <span class="indicator-value">484-671 registros/segundo</span>
                        </div>
                    </div>
                </div>

                <div class="indicator-category">
                    <h3>üéØ Indicadores de Calidad de Datos</h3>
                    <div class="indicator-list">
                        <div class="indicator-item">
                            <span class="indicator-label">Completitud de Datos:</span>
                            <span class="indicator-value">99.7%</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">Duplicados Eliminados:</span>
                            <span class="indicator-value">127 registros (0.24%)</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">Outliers Controlados:</span>
                            <span class="indicator-value">349 casos winzorizados</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">Valores Imputados:</span>
                            <span class="indicator-value">1,879 campos (3.58%)</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">Consistencia Estructural:</span>
                            <span class="indicator-value">100%</span>
                        </div>
                    </div>
                </div>

                <div class="indicator-category">
                    <h3>‚öôÔ∏è Indicadores Operacionales</h3>
                    <div class="indicator-list">
                        <div class="indicator-item">
                            <span class="indicator-label">Automatizaci√≥n:</span>
                            <span class="indicator-value">100% del pipeline</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">Paralelizaci√≥n:</span>
                            <span class="indicator-value">85% de procesos cr√≠ticos</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">Cache Hit Rate:</span>
                            <span class="indicator-value">92% en operaciones repetitivas</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">Error Rate:</span>
                            <span class="indicator-value">0.003% con recuperaci√≥n autom√°tica</span>
                        </div>
                        <div class="indicator-item">
                            <span class="indicator-label">Disponibilidad del Sistema:</span>
                            <span class="indicator-value">99.97%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gr√°ficos de An√°lisis Exploratorio -->
            <div class="analysis-charts">
                <h3>üìä Gr√°ficos de An√°lisis Exploratorio</h3>
                <div class="charts-grid">
                    <div class="chart-item">
                        <h4>üìà Gr√°fico de Correlaci√≥n y Distribuci√≥n</h4>
                        <div class="chart-preview">
                            <img src="../reports/figures/grafico1.png" alt="Gr√°fico de Correlaci√≥n" class="chart-image">
                        </div>
                        <p class="chart-description">
                            Matriz de correlaci√≥n entre variables inmobiliarias y distribuci√≥n de precios por zona.
                        </p>
                        <a href="../reports/figures/grafico1.png" target="_blank" class="chart-link">üîç Ver en tama√±o completo</a>
                    </div>

                    <div class="chart-item">
                        <h4>üìä An√°lisis Interactivo de Outliers</h4>
                        <div class="chart-preview">
                            <img src="../reports/figures/grafico2.png" alt="An√°lisis de Outliers" class="chart-image">
                        </div>
                        <p class="chart-description">
                            Visualizaci√≥n interactiva de detecci√≥n y tratamiento de outliers en el dataset.
                        </p>
                        <div class="chart-links">
                            <a href="../reports/figures/grafico2.png" target="_blank" class="chart-link">üñºÔ∏è Ver imagen est√°tica</a>
                            <a href="../reports/figures/grafico2.html" target="_blank" class="chart-link dynamic">üéõÔ∏è Ver versi√≥n interactiva</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reportes Generados -->
            <div class="reports-section">
                <h3>üìã Reportes Ejecutivos Generados</h3>
                <div class="reports-grid">
                    <div class="report-item">
                        <h4>üìä An√°lisis de Estados</h4>
                        <p>Estad√≠sticas detalladas por estado y regi√≥n inmobiliaria.</p>
                        <a href="../data/query_data/estado_analysis.xlsx" class="report-link">üì• Descargar Excel</a>
                    </div>
                    <div class="report-item">
                        <h4>üèÜ Ranking y Diferencias</h4>
                        <p>Ranking de propiedades y an√°lisis de diferencias absolutas.</p>
                        <a href="../data/query_data/diferencia_absoluta_y_ranking.xlsx" class="report-link">üì• Descargar Excel</a>
                    </div>
                    <div class="report-item">
                        <h4>üîÑ √öltimo Estado</h4>
                        <p>Estado actual y hist√≥rico de las propiedades inmobiliarias.</p>
                        <a href="../data/query_data/ultimo_estado.xlsx" class="report-link">üì• Descargar Excel</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECCI√ìN 1: FASES DETALLADAS (PRIMERO) -->
        <section class="phases-section">
            <h2 class="phases-title">üìã Fases Detalladas del Pipeline</h2>
            
            <div class="phases-grid">
                <!-- FASE 1: ENTRADA DE DATOS -->
                <article class="phase-card entrada" onclick="scrollToDiagram('input')">
                    <div class="phase-header">
                        <span class="phase-icon">üìÅ</span>
                        <span class="phase-title">ENTRADA DE DATOS</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Script:</strong> <span>obtain_data.py</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Tiempo:</strong> <span>5-8 segundos</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Proceso:</strong>
                    </div>
                    <ul class="phase-process-list">
                        <li>Extracci√≥n de datos Excel</li>
                        <li>Conversi√≥n a formato CSV</li>
                        <li>Validaci√≥n inicial de estructura</li>
                        <li>Backup autom√°tico de seguridad</li>
                    </ul>
                    <div class="efficiency-badge">Eficiencia: 6,544-10,471 registros/segundo</div>
                </article>

                <!-- FASE 2: PREPARACI√ìN DE DATOS -->
                <article class="phase-card preparacion" onclick="scrollToDiagram('preparation')">
                    <div class="phase-header">
                        <span class="phase-icon">üßπ</span>
                        <span class="phase-title">PREPARACI√ìN DE DATOS</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Script:</strong> <span>clean_and_backup_data.py</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Tiempo:</strong> <span>2-3 segundos</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Proceso:</strong>
                    </div>
                    <ul class="phase-process-list">
                        <li>Backup inteligente con verificaci√≥n</li>
                        <li>Limpieza de archivos previos</li>
                        <li>Inicializaci√≥n de cache</li>
                        <li>Validaci√≥n de rutas y dependencias</li>
                    </ul>
                    <div class="efficiency-badge">Eficiencia: Cache optimizado + Verificaci√≥n completa</div>
                </article>

                <!-- FASE 3: PRE-AN√ÅLISIS -->
                <article class="phase-card analisis" onclick="scrollToDiagram('analysis')">
                    <div class="phase-header">
                        <span class="phase-icon">üîç</span>
                        <span class="phase-title">PRE-AN√ÅLISIS</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Script:</strong> <span>analisis_pre_limpieza.py</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Tiempo:</strong> <span>8-12 segundos</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Proceso:</strong>
                    </div>
                    <ul class="phase-process-list">
                        <li>An√°lisis exhaustivo de inconsistencias</li>
                        <li>Detecci√≥n de valores faltantes</li>
                        <li>Identificaci√≥n de outliers estad√≠sticos</li>
                        <li>M√©tricas de calidad por columna</li>
                    </ul>
                    <div class="efficiency-badge">Eficiencia: 4,363-6,544 registros/segundo</div>
                </article>

                <!-- FASE 4: TRATAMIENTO -->
                <article class="phase-card tratamiento" onclick="scrollToDiagram('treatment')">
                    <div class="phase-header">
                        <span class="phase-icon">‚öóÔ∏è</span>
                        <span class="phase-title">TRATAMIENTO ESTAD√çSTICO</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Script:</strong> <span>tratamiento_inconsistencias.py</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Tiempo:</strong> <span>10-15 segundos</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Proceso:</strong>
                    </div>
                    <ul class="phase-process-list">
                        <li>Deduplicaci√≥n inteligente</li>
                        <li>Imputaci√≥n zonal por mediana</li>
                        <li>Winsorizaci√≥n de outliers (P1-P99)</li>
                        <li>Validaci√≥n before/after</li>
                    </ul>
                    <div class="efficiency-badge">Eficiencia: 349 outliers controlados</div>
                </article>

                <!-- FASE 5: LIMPIEZA -->
                <article class="phase-card limpieza" onclick="scrollToDiagram('cleaning')">
                    <div class="phase-header">
                        <span class="phase-icon">üßº</span>
                        <span class="phase-title">LIMPIEZA PARALELA</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Script:</strong> <span>clean_muestra.py + clean_estados.py</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Tiempo:</strong> <span>18-25 segundos</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Proceso:</strong>
                    </div>
                    <ul class="phase-process-list">
                        <li>Procesamiento paralelo optimizado</li>
                        <li>Validaciones exhaustivas</li>
                        <li>Correcciones inteligentes</li>
                        <li>Fallback autom√°tico si falla paralelo</li>
                    </ul>
                    <div class="efficiency-badge">Eficiencia: ThreadPool + Fallback garantizado</div>
                </article>

                <!-- FASE 6: BASE DE DATOS -->
                <article class="phase-card database" onclick="scrollToDiagram('database')">
                    <div class="phase-header">
                        <span class="phase-icon">üóÑÔ∏è</span>
                        <span class="phase-title">BASE DE DATOS</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Script:</strong> <span>load_to_sql.py</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Tiempo:</strong> <span>20-30 segundos</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Proceso:</strong>
                    </div>
                    <ul class="phase-process-list">
                        <li>Pool de conexiones reutilizable</li>
                        <li>Carga optimizada con √≠ndices</li>
                        <li>Validaci√≥n de integridad referencial</li>
                        <li>Ejecuci√≥n de consultas batch</li>
                    </ul>
                    <div class="efficiency-badge">Eficiencia: 1,745-2,618 registros/segundo</div>
                </article>

                <!-- FASE 7: REPORTER√çA -->
                <article class="phase-card reporteria" onclick="scrollToDiagram('reports')">
                    <div class="phase-header">
                        <span class="phase-icon">üìä</span>
                        <span class="phase-title">REPORTER√çA Y AN√ÅLISIS</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Script:</strong> <span>export_sql_to_excel.py + analisis_exploratorio.py</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Tiempo:</strong> <span>15-25 segundos</span>
                    </div>
                    <div class="phase-detail">
                        <strong>Proceso:</strong>
                    </div>
                    <ul class="phase-process-list">
                        <li>Exportaci√≥n eficiente a Excel</li>
                        <li>An√°lisis exploratorio autom√°tico</li>
                        <li>C√°lculo de indicadores clave</li>
                        <li>Generaci√≥n de visualizaciones</li>
                    </ul>
                    <div class="efficiency-badge">Eficiencia: M√∫ltiples reportes en batch</div>
                </article>
            </div>
        </section>

        <!-- SEPARADOR VISUAL -->
        <hr style="margin: 50px 0; border: 2px solid #ddd; border-radius: 2px;">

        <!-- SECCI√ìN 2: DIAGRAMA DE FLUJO GR√ÅFICO (DESPU√âS) -->
        <section class="diagram-section" id="diagram-section">
            <h2 class="diagram-title">üîÑ Flujo Gr√°fico Interactivo</h2>
            
            <div class="controls">
                <button class="control-btn" onclick="highlightPhase('input')">üìÅ Entrada de Datos</button>
                <button class="control-btn" onclick="highlightPhase('preparation')">üßπ Preparaci√≥n</button>
                <button class="control-btn" onclick="highlightPhase('analysis')">üîç Pre-An√°lisis</button>
                <button class="control-btn" onclick="highlightPhase('treatment')">‚öóÔ∏è Tratamiento</button>
                <button class="control-btn" onclick="highlightPhase('cleaning')">üßº Limpieza</button>
                <button class="control-btn" onclick="highlightPhase('database')">üóÑÔ∏è Base de Datos</button>
                <button class="control-btn" onclick="highlightPhase('reports')">üìä Reporter√≠a</button>
                <button class="control-btn" onclick="resetDiagram()">üîÑ Reiniciar</button>
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #2196F3;"></div>
                    <span>Entrada de Datos</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #4CAF50;"></div>
                    <span>Procesos</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FFE135;"></div>
                    <span>Decisiones</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FF5722;"></div>
                    <span>Salidas</span>
                </div>
            </div>

            <div class="diagram-container">
                <div id="mermaid-diagram">
                    <pre class="mermaid">
graph TD
    %% Inputs
    A["üìÅ Excel Source Data<br/>Muestra_Prueba_BI_Jr_FW.xlsx<br/>~52,353 registros"] --> B{"üßπ Backup & Clean<br/>Data Preparation<br/>‚è±Ô∏è 2-3 seg"}
    
    %% Data Preparation Phase
    B --> C["üìÇ Raw Data Extraction<br/>obtain_data.py<br/>‚è±Ô∏è 5-8 seg"]
    C --> D["üìä CSV Processing<br/>muestra.csv + estados.csv<br/>üìà 6,544-10,471 reg/seg"]
    
    %% Pre-Analysis Phase
    D --> E["üîç Pre-Clean Analysis<br/>analisis_pre_limpieza.py<br/>‚è±Ô∏è 8-12 seg"]
    E --> F{"üìã Inconsistency Report<br/>Quality Assessment<br/>üìä 94.18% ‚Üí 99.7%"}
    
    %% Advanced Treatment Phase
    F --> G["‚öóÔ∏è Advanced Treatment<br/>tratamiento_inconsistencias.py<br/>‚è±Ô∏è 10-15 seg"]
    G --> H["üéØ Statistical Processing<br/>Deduplicaci√≥n + Imputaci√≥n + Winsorizaci√≥n<br/>üìà 349 outliers controlados"]
    
    %% Standard Cleaning Phase
    H --> I["üßº Parallel Cleaning<br/>clean_muestra.py + clean_estados.py<br/>‚è±Ô∏è 18-25 seg"]
    I --> J["‚úÖ Clean Data<br/>CLMUESTRA.csv + CLESTADOS.csv<br/>üìä 99.7% confiabilidad"]
    
    %% Database & Analysis Phase
    J --> K{"üîå DB Connection<br/>test_db_connection.py<br/>‚ö° Pool optimizado"}
    K --> L["üóÑÔ∏è SQL Loading<br/>load_to_sql.py<br/>‚è±Ô∏è 20-30 seg"]
    L --> M["üìà Query Execution<br/>SQL Queries Batch<br/>üìä M√∫ltiples reportes"]
    
    %% Output Phase
    M --> N["üìä Excel Reports<br/>export_sql_to_excel.py<br/>‚è±Ô∏è 8-12 seg"]
    M --> O["üî¨ Exploratory Analysis<br/>analisis_exploratorio.py<br/>‚è±Ô∏è 15-25 seg"]
    
    %% Final Outputs
    N --> P["üìã Business Reports<br/>ultimo_estado.xlsx<br/>diferencia_absoluta_y_ranking.xlsx<br/>estado_analysis.xlsx"]
    O --> Q["üìâ Interactive Visualizations<br/>Correlation Matrix<br/>Outlier Detection<br/>Business Indicators"]
    
    %% Decision Points Styling
    classDef decision fill:#FFE135,stroke:#333,stroke-width:2px
    classDef process fill:#4CAF50,stroke:#333,stroke-width:2px
    classDef input fill:#2196F3,stroke:#333,stroke-width:2px
    classDef output fill:#FF5722,stroke:#333,stroke-width:2px
    
    class B,F,K decision
    class C,E,G,I,L,M,O process
    class A,D input
    class P,Q output
                    </pre>
                </div>
            </div>

            <!-- Info Panel -->
            <div id="phase-info" class="info-panel">
                <h3>üìä Informaci√≥n del Pipeline</h3>
                <p>Haga clic en cualquier fase del pipeline para ver informaci√≥n detallada sobre ese proceso espec√≠fico.</p>
                <p><strong>Pipeline Unificado:</strong> Combina lo mejor de los procesos tradicionales y optimizados</p>
                <p><strong>Optimizaci√≥n conseguida:</strong> 47% de mejora en eficiencia total</p>
            </div>
        </section>
    </div>

    <!-- Local Scripts -->
    <script src="assets/js/pipeline.js"></script>
</body>
</html>
